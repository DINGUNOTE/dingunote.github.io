---
layout: single
title: "프로토타입"

date: 2022-07-11 12:16:00 +0900
last-mod: 2022-07-11 18:31:00 +0900

category: JavaScript
---

자바스크립트는 `프로토타입(prototype)` 기반 언어다. 클래스 기반 언어에서는 ‘상속’을 사용하지만 프로토타입 기반 언어에서는 어떤 객체를 `원형(prototype)`으로 삼고, `복제(참조)`해서 상속과 비슷한 효과를 얻는다. 유명한 프로그래밍 언어의 상당수가 클래스 기반인 것에 비교하면 프로토타입은 독특한 개념이다.

## 📌 프로토타입의 개념
* ### constructor, prototype, instance
  ```javascript
  var instance = new Contructor();
  ```

  위 코드를 도식으로 나타내면 아래와 같이 표현할 수 있다.

  <div style="text-align:center;">
    <img style="display:block;margin:15px auto;width:100%;max-width:500px;" src="https://user-images.githubusercontent.com/89335307/178202318-fb5cba27-7e7d-4c45-af9d-d7966fb8e8cc.png">
    <span>프로토타입 도식</span>
  </div>

  * 어떤 생성자 함수(Contructor)를 new 연산자와 함께 호출
  * Contructor에서 정의된 내용을 바탕으로 새로운 인스턴스(instance) 생성
  * 이때 instance에는 __proto__라는 프로퍼티가 자동으로 부여됨
  * 이 프로퍼티는 Constructor의 prototype이라는 프로퍼티를 참조

  `prototype`이라는 프로퍼티와 `__proto__`라는 프로퍼티가 등장했는데, 이 둘의 관계가 프로토타입 개념의 핵심이다. prototype은 객체이고, 이를 참조하는 __proto__도 당연히 객체다. prototype 객체 내부에는 인스턴스가 사용할 메서드를 저장한다. 그러면 인스턴스에서도 숨겨진 프로퍼티인 __proto__를 통해 메서드들에 접근할 수 있게 된다.

  > 💡 __proto__를 읽을 때는 '던더 프로토(dunder proto)'라고 읽는다고 한다. dunder는 'double underscore'의 줄임말

  ```javascript
  var Person = function(name) {
    this._name = name;
  };
  Person.prototype.getName = function() {
    return this._name;
  };
  ```
  이제 Person 인스턴스는 __proto__프로퍼티를 통해 getName을 호출할 수 있다.
  ```javascript
  var suzi = new Person('Suzi');
  suzi.__proto__.getName(); // undefined

  Person.prototype === suzi.__proto__ // true
  ```
  instance의 __proto__가 Constructor의 prototype 프로퍼티를 참조하기 때문에 같은 객체를 바라보기 때문이다. 결과로 'Suzi' 값이 나오지 않은 것보다 에러가 발생하지 않았다는 것이 우선이다. 어떤 변수를 실행해서 undefined가 나왔다는 것은 이 변수가 호출할 수 있는 함수에 해당한다는 것을 의미한다. 함수가 아닌 데이터 타입이었다면 TypeError가 발생했을 것이다. 값이 나왔기 때문에 getName이 실행됐음을 알고, 함수라는 것이 입증됐다.

  undefined가 나온 이유는 this 바인딩된 대상이 잘못 지정된 것이다. 함수를 메서드로서 호출할 때는 메서드명 바로 앞의 객체가 this가 된다. `suzi.__proto__.getName()`에서 getName 함수 내부에는 name 프로퍼티가 없기 때문에 undefined가 반환됐다.
  ```javascript
  var suzi = new Person('Suzi');
  suzi.__proto__._name = 'SUZI__proto__';
  suzi.__proto__.getName(); // SUZI__proto__
  ```
  this를 인스턴스로 하고 싶다면 __proto__없이 인스턴스에서 곧바로 메서드를 호출하면 된다.
  ```javascript
  var suzi = new Person('Suzi', 28);
  suzi.getName(); // Suzi
  var iu = new Person('Jieun', 28);
  iu.getName(); // Jieun
  ```
  이대로 메서드가 호출되고 원하는 값이 나오는 이유는 `__proto__가 생략 가능한 프로퍼티`이기 때문이다. 원래부터 생략 가능하도록 정의돼 있다. 이 정의를 바탕으로 자바스크립트 전체 구조가 구성됐다고 해도 과언이 아니다. ‘생략 가능한 프로퍼티’라는 개념은 언어를 창시하고 전체 구조를 설계한 브랜든 아이크의 아이디어다. 
  ```javascript
  suzi__proto__.getName
  -> suzi(.__proto__).getName
  -> suzi.getName
  ```

  ⭐ 자바스크립트는 함수에 자동으로 객체인 prototype 프로퍼티를 생성해 놓는데, 해당 함수를 생성자 함수로서 사용할 경우, 즉 new 연산자와 함께 함수를 호출할 경우, 그로부터 생성된 인스턴스에는 숨겨진 프로퍼티인 __proto__가 자동으로 생성되고, 이 프로퍼티는 생성자 함수의 prototype 프로퍼티를 참조한다. __proto__프로퍼티는 생략 가능하도록 구현돼 있기 때문에 `생성자 함수의 prototype에 어떤 메서드나 프로퍼티가 있다면 인스턴스에서도 마치 자신의 것처럼 해당 메서드나 프로퍼티에 접근할 수 있게 된다.`


  ```javascript
  // prototype과 __proto__
  var Constructor = function (name) {
    this.name = name;
  };
  Constructor.prototype.method1 = function () {};
  Constructor.prototype.property1 = 'Constructor Prototype Property';

  var instance = new Constructor('Instance');
  console.dir(Constructor);
  console.dir(instance);
  ```
  위 코드를 크롬 개발자 도구 콘솔에서 결과를 확인하면 다음과 같다.
  <img style="display:block;margin:0 auto;width:100%;max-width:500px;" src="https://user-images.githubusercontent.com/89335307/178230141-26ffbc7a-585e-4c1c-9381-4f21b7d07d32.png">
  > 💡 속성들의 색상 차이는 { enumerable: false } 속성이 부여된 프로퍼티인지 여부에 따라 다르다. 짙은색은 enumerable, 열거 가능한 프로퍼티를 의미하고, 옅은색은 innumerable, 열거할 수 없는 프로퍼티를 의미한다.

  instance의 디렉터리 구조를 출력하라고 했는데, 결과는 Constructor가 나오고 있다. 생성자 함수의 인스턴스는 해당 생성자 함수의 이름을 표기해서 해당 함수의 인스턴스임을 표시한다. instance의 prototype과 Constructor의 prototype이 동일한 내용으로 구성돼 있는게 확인된다. 

  대표적인 내장 생성자 함수인 Array로 다시 살펴보자.
  ```javascript
  var arr = [1, 2];
  console.dir(arr);
  console.dir(Array);
  ```
  <img style="display:block;margin:0 auto;width:100%;max-width:500px;" src="https://user-images.githubusercontent.com/89335307/178232990-dbca889a-5e07-4ffa-9e00-a1516b39bea3.png">




<!-- > # 💎 정리
> * <strong>⭐ ㅇㅇㅇ</strong>
> * <strong>⭐ ㅇㅇㅇ</strong>
> * <strong>⭐ ㅇㅇㅇ</strong> -->


> ### 참고 자료<br>[코어 자바스크립트](http://www.yes24.com/Product/Goods/78586788)<img style="display:block;width:200px" src="https://user-images.githubusercontent.com/89335307/177023356-078a494f-5edb-4148-a2f6-e37108404bc4.jpg">
